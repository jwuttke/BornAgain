%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%%   BornAgain User Manual
%%
%%   homepage:   http://www.bornagainproject.org
%%
%%   copyright:  Forschungszentrum JÃ¼lich GmbH 2015
%%
%%   license:    Creative Commons CC-BY-SA
%%   
%%   authors:    Scientific Computing Group at MLZ Garching
%%               C. Durniak, M. Ganeva, G. Pospelov, W. Van Herck, J. Wuttke
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%-------------------------------------------------------------------------------
%  Page layout
%-------------------------------------------------------------------------------

\def\myparindent{5ex}
\setlength{\parindent}{\myparindent} % workaround, for colorboxes
\textwidth=410pt
\hoffset=210mm % width of A4
\advance\hoffset by -1\textwidth
\hoffset=0.5\hoffset
\advance\hoffset by -1in
% Now a slight assymmetry to leave more blank on the side of the fold
\evensidemargin=0pt
\oddsidemargin=5pt
\advance\evensidemargin by -1\oddsidemargin
\setlength{\headheight}{15pt}

\renewcommand{\arraystretch}{1.3}

%-------------------------------------------------------------------------------
%  Fancy page header
%-------------------------------------------------------------------------------

\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}

\renewcommand{\sectionmark}[1]{\markright{#1}}

\fancyhead[LO,RE]{Page \thepage}
\fancyhead[LE]{\nouppercase{\leftmark}}
\fancyhead[RO]{\nouppercase{\rightmark}}


\headwidth=1.1\textwidth
\renewcommand{\headrulewidth}{1pt}%{1.5pt}
\renewcommand{\footrulewidth}{0pt}%{1.5pt}
\fancyhfoffset[L]{24pt}
\fancyhfoffset[R]{24pt}

\fancypagestyle{plain}{%
\fancyhf{} % clear all header and footer fields
\headwidth=1.1\textwidth
\renewcommand{\headrulewidth}{1pt}%{1.5pt}
\renewcommand{\footrulewidth}{0pt}
\fancyhead[LO,RE]{Page \thepage}
\fancyhead[LE]{\nouppercase{\leftmark}}
\fancyhead[RO]{\nouppercase{\rightmark}}

\fancyhfoffset[L]{24pt}
\fancyhfoffset[R]{24pt}
}

%-------------------------------------------------------------------------------
%  Fonts, symbols
%-------------------------------------------------------------------------------

\usepackage[bold-style=ISO]{unicode-math} % -ISO or -TeX
\usepackage{amsmath}
\usepackage{mathtools} % has \coloneqq for :=
\usepackage{manfnt} % for \dbend
\usepackage{dingbat}

%-------------------------------------------------------------------------------
%  Sectioning
%-------------------------------------------------------------------------------

\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
%\usepackage[toc,page]{appendix}
\usepackage{titlesec}

\newcommand{\mysection}[2]{%
                         \sectionmark{#1}%
                         \section{#2}%
                         \sectionmark{#1}%
                       }

\newcommand{\mychapter}[2]{
    \setcounter{chapter}{#1}
    \setcounter{section}{0}
    \chapter*{#2}
    \addcontentsline{toc}{chapter}{#2}
}

%-------------------------------------------------------------------------------
%  Index, List of Symbols
%-------------------------------------------------------------------------------

\usepackage{imakeidx}\makeindex
\usepackage[refpage]{nomencl}\makenomenclature
  \renewcommand{\nomname}{List of Symbols}
  % see nomencl.txt for how to force the ordering of symbols
  \def\pagedeclaration#1{, \hyperpage{#1}}%
  
\def\otherchapter#1{
  \clearpage
  \phantomsection
  \addcontentsline{toc}{chapter}{#1}
  \markboth{#1}{#1}}

%-------------------------------------------------------------------------------
%  Floats
%-------------------------------------------------------------------------------

\usepackage{graphicx}
\usepackage{subfigure}

\usepackage{placeins} % defines \FloatBarrier
\usepackage{float}

%-------------------------------------------------------------------------------
%  Tables, code listings, ...
%-------------------------------------------------------------------------------

%\usepackage{longtable}
%\usepackage{booktabs} % defines \toprule &c for use in tabular
% see http://tex.stackexchange.com/questions/78075/multi-page-with-tabulary
\usepackage{tabulary}

\usepackage{listings}
\usepackage{lstcustom}
\usepackage{enumerate}
\renewcommand{\lstfontfamily}{\ttfamily}

%-------------------------------------------------------------------------------
%  Tikz pictures
%-------------------------------------------------------------------------------

\usepackage{tikz}
\usepackage{tikz-uml} 
\usetikzlibrary{trees,matrix,positioning,decorations.pathreplacing,calc}

\newcommand{\ntikzmark}[2]
           {#2\thinspace\tikz[overlay,remember picture,baseline=(#1.base)]
             {\node[inner sep=0pt] (#1) {};}}

\newcommand{\makebrace}[3]{%
    \begin{tikzpicture}[overlay, remember picture]
        \draw [decoration={brace,amplitude=0.6em},decorate]
        let \p1=(#1), \p2=(#2) in
        ({max(\x1,\x2)}, {\y1+1.5em}) -- node[right=0.6em] {#3} ({max(\x1,\x2)}, {\y2});
    \end{tikzpicture}
}

%-------------------------------------------------------------------------------
%  Highlighting
%-------------------------------------------------------------------------------

\newcommand{\BareRemark}[1]%
{\noindent\smallpencil\colorbox{blue!10}%
{\parbox{\dimexpr\linewidth-8\fboxsep}{#1}}}

\newcommand{\MakeRemark}[2]{\BareRemark{\underline{#1} #2 }}

\newcommand{\ImportantPoint}[2]
{\noindent
  {\huge\danger}\colorbox{magenta!40}{\parbox{\dimexpr\linewidth-8\fboxsep}
 {\underline{#1} #2}}}

\newcommand{\BareWarning}[1]%
{\noindent\colorbox{red!30}{\begin{minipage}
{1\textwidth}\strut\hspace{\myparindent}#1\end{minipage}}}

\def\Warning{\noindent\colorbox{red!30}}
\def\Highlight{\noindent\colorbox{yellow!30}}
\def\Box{\parbox{1\textwidth}}

%-------------------------------------------------------------------------------
%  Hyperref
%-------------------------------------------------------------------------------

\usepackage{hyperref} % wants to be included last
\hypersetup{
    colorlinks,
    linkcolor={red!50!black},
    citecolor={blue!50!black},
    urlcolor={blue!80!black}
}
